@import 'carbon-components/scss/globals/scss/colors';
@import 'carbon-components/scss/globals/scss/helper-mixins';
@import 'carbon-components/scss/globals/scss/spacing';
@import 'carbon-components/scss/globals/scss/typography';
@import 'carbon-components/scss/globals/scss/vars';
@import '../../globals/scss/layout';

.bx--data-table-v2.infra--data-table--batch-editable {
  table-layout: fixed;

  &.infra--data-table--batch-saving {
    position: relative;

    & tbody:after {
      content: '';
      background-color: rgba($ui-01, 0.6);
      position: absolute;
      width: 100%;
      height: 100%;
      display: block;
      top: 0;
      left: 0;
      z-index: zInfra(tableBodySaving);
    }
  }
}

.bx--data-table-v2-container.infra--data-table--batch-editable {
  .bx--table-toolbar {
    min-height: rem(48px);
  }

  th,
  td {
    padding-left: rem(16px);

    &:first-of-type {
      padding-left: rem(24px);
    }
  }
}

.bx--data-table-v2-container.infra--data-table--batch-editing {
  th {
    border-left: 1px solid $ui-03;

    &:first-of-type {
      padding-left: rem(24px);
    }
  }

  tr:hover td,
  td {
    background-color: $field-02;
  }

  td {
    border-left: 1px solid $ui-03;
    padding: 0;

    &:first-of-type {
      padding-left: rem(8px);
    }

    .bx--form-item {
      position: relative;
    }

    .bx--text-input {
      background-color: $field-02;
      box-shadow: 0 2px 0px 0px transparent;
      height: calc(#{rem(48px)} - 1px);

      &[data-invalid] {
        box-shadow: 0 2px 0px 0px $support-01;
      }
    }

    .bx--select {
      width: 100%;

      &__arrow {
        bottom: rem(21.5px);
      }
    }

    .bx--select-input {
      background-color: $field-02;
      box-shadow: 0 1px 0px 0px transparent;
      height: calc(#{rem(48px)} - 1px);
    }

    .bx--text-input ~ .bx--form-requirement,
    .infra--ghost-select-overlay ~ .bx--form-requirement {
      position: absolute;
      right: rem(12px);
      top: calc(50% - 8px);
      margin-top: 0;

      .bx--tooltip__trigger > div {
        width: 16px;
        height: 16px;
      }

      svg path {
        fill: $support-01;
      }
    }

    .infra--ghost-select-overlay {
      height: 3rem;

      & ~ .bx--form-requirement {
        right: rem(40px);
      }
    }

    [data-invalid] .infra--ghost-select-overlay {
      bottom: 0;
    }
  }
}

.bx--text-input.infra--data-table--batch-edit__text-input {
  min-width: auto;
}

th.infra--data-table--batch-edit-delete-cell {
  width: 40px;
}

td.infra--data-table--batch-edit-delete-cell {
  text-align: center;
}

.infra--batch-status {
  display: flex;
  align-items: center;
  flex: 1;
  color: $ui-01;
}

.infra--batch-summary {
  padding-left: rem(16px);

  .bx--batch-summary__cancel {
    margin: 0 rem(8px);
  }
}

.infra--batch-summary__save {
  .bx--inline-loading__text {
    order: 1;
  }

  .bx--inline-loading__animation {
    order: 2;
  }

  .bx--inline-loading ~ .bx--btn__icon {
    display: none;
  }
}
